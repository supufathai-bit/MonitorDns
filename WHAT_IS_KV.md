# üì¶ KV ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

## üéØ KV = Key-Value Store

**KV** ‡∏Ñ‡∏∑‡∏≠ **Key-Value database** ‡∏Ç‡∏≠‡∏á Cloudflare ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÜ

---

## üí° ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏á‡πà‡∏≤‡∏¢‡πÜ

**KV** ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô **‡∏ï‡∏π‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á** ‡∏ó‡∏µ‡πà‡∏°‡∏µ:
- **Key** (‡∏Å‡∏∏‡∏ç‡πÅ‡∏à) = ‡∏ä‡∏∑‡πà‡∏≠/‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **Value** (‡∏Ç‡∏≠‡∏á) = ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
Key: "latest:ufathai.win:AIS"
Value: {
  "hostname": "ufathai.win",
  "isp_name": "AIS",
  "status": "BLOCKED",
  "timestamp": 1703846400000
}
```

---

## üîç ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö

### KV vs Database ‡∏õ‡∏Å‡∏ï‡∏¥

| KV | Database ‡∏õ‡∏Å‡∏ï‡∏¥ (SQL) |
|----|---------------------|
| ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏ö‡∏ö key-value | ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏ö‡∏ö table/row |
| ‡∏á‡πà‡∏≤‡∏¢ ‡πÄ‡∏£‡πá‡∏ß | ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏ß‡πà‡∏≤ |
| ‡πÑ‡∏°‡πà‡∏°‡∏µ query ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô | ‡∏°‡∏µ query ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡πÑ‡∏î‡πâ |
| ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡πà‡∏≤‡∏¢‡πÜ | ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô |

---

## üéØ ‡πÉ‡∏ä‡πâ KV ‡∏¢‡∏±‡∏á‡πÑ‡∏á?

### ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡πÄ‡∏£‡∏≤

**‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Android app:**
```typescript
// ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
await env.SENTINEL_DATA.put(
  "latest:ufathai.win:AIS",  // Key
  JSON.stringify({          // Value
    hostname: "ufathai.win",
    isp: "AIS",
    status: "BLOCKED"
  })
);

// ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
const data = await env.SENTINEL_DATA.get("latest:ufathai.win:AIS");
```

---

## üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô KV

### 1. Latest Results
- Key: `latest:{hostname}:{isp}`
- Value: ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ domain+ISP

### 2. Sync History
- Key: `sync:{device_id}:{timestamp}`
- Value: ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ sync

### 3. Device Info
- Key: `device:{device_id}`
- Value: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• device

---

## ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ç‡∏≠‡∏á KV

1. **‡πÄ‡∏£‡πá‡∏ß** - ‡∏≠‡πà‡∏≤‡∏ô/‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å
2. **‡∏á‡πà‡∏≤‡∏¢** - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á setup database
3. **‡∏ü‡∏£‡∏µ** - Cloudflare ‡πÉ‡∏´‡πâ‡∏ü‡∏£‡∏µ (100,000 reads/day)
4. **Global** - ‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÇ‡∏•‡∏Å

---

## ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î

1. **‡πÑ‡∏°‡πà‡∏°‡∏µ query ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô** - ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ key
2. **‡∏Ç‡∏ô‡∏≤‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î** - Value ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 25MB
3. **Eventually consistent** - ‡∏≠‡∏≤‡∏à delay ‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢

---

## üéØ ‡∏™‡∏£‡∏∏‡∏õ

**KV = Key-Value Store**
- ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö key-value
- ‡∏á‡πà‡∏≤‡∏¢ ‡πÄ‡∏£‡πá‡∏ß ‡∏ü‡∏£‡∏µ
- ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡πÄ‡∏ä‡πà‡∏ô ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå DNS check

**‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡πÄ‡∏£‡∏≤:**
- ‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å Android app
- ‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö sync history
- ‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö device info

---

## üìö ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- [Cloudflare KV Documentation](https://developers.cloudflare.com/workers/runtime-apis/kv/)

